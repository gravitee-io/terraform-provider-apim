overlay: 1.0.0
x-speakeasy-jsonpath: rfc9535
info:
  title: V4API Terraform overlay
  version: 0.0.1
actions:


  # Entity management

  - target: $.paths["/organizations/{orgId}/environments/{envId}/apis"].put
    update:
      x-speakeasy-entity-operation: APIV4#create,update
  - target: $.paths["/organizations/{orgId}/environments/{envId}/apis/{hrid}"].get
    update:
      x-speakeasy-entity-operation: APIV4#read
  - target: $.paths["/organizations/{orgId}/environments/{envId}/apis/{hrid}"].delete
    update:
      x-speakeasy-entity-operation: APIV4#delete
  - target: $.components.schemas.ApiV4Spec
    update:
      x-speakeasy-entity: APIV4


  # Customizations

  ## Nothing is computed (except for defaulted attributes)
  - target: $.components.schemas.*.properties.*
    description: Prevent unknown values if unconfigured
    update:
      x-speakeasy-param-computed: false


  ## Need to be computed to avoid diff
  - target: $.components.schemas.ApiV4State.allOf[?@.properties.id].properties.id
    update:
      x-speakeasy-param-computed: true
      x-speakeasy-param-suppress-computed-diff: true

  ## Should be computed but can't be
#  - target: $.components.schemas.ApiV4Spec.properties.metadata
#    description: API return some, need to ignore
#    update:
#      x-speakeasy-param-computed: true
#      x-speakeasy-param-suppress-computed-diff: true
  ## Empty array create diff, should be fixed at the API level
  - target: $.components.schemas.ApiV4Spec.properties.properties
    description: Prevent unknown values if unconfigured
    update:
      x-speakeasy-param-computed: true
      x-speakeasy-param-suppress-computed-diff: true
  - target: $.components.schemas.ApiV4Spec.properties.resources
    description: Prevent unknown values if unconfigured
    update:
      x-speakeasy-param-computed: true
      x-speakeasy-param-suppress-computed-diff: true
  - target: $.components.schemas.ApiV4Spec.properties.members
    description: Prevent unknown values if unconfigured
    update:
      x-speakeasy-param-computed: true
      x-speakeasy-param-suppress-computed-diff: true


  ## Removal
  - target: $.components.schemas.ApiV4State.allOf[?@.properties.crossId].properties.crossId
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.ApiV4Spec.properties.primaryOwner
    description: Prevent unknown values if unconfigured
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.PrimaryOwner
    description: Prevent unknown values if unconfigured
    update:
      x-speakeasy-terraform-ignore: true

  ## Schemaless config
  - target: $.components.schemas.EndpointGroupV4.properties.sharedConfiguration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.EndpointV4.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.EndpointV4.properties.sharedConfigurationOverride
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.Entrypoint.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.PageSource.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.PlanSecurity.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.APIResource.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.Rule.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.ServiceV4.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any
  - target: $.components.schemas.PageSource.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      x-speakeasy-type-override: any

  ## Type change
  - target: $.components.schemas.FlowStep.properties.configuration
    description: Configuration is a mapping, not an empty object. Easiest to define as JSON for now.
    update:
      type: string
