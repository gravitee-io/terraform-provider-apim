---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "apim_apiv4 Resource - terraform-provider-apim"
subcategory: ""
description: |-
  Apiv4 Resource
---

# apim_apiv4 (Resource)

Apiv4 Resource

## Example Usage

```terraform
resource "apim_apiv4" "example" {
  # should match the resource name
  hrid            = "example"
  name            = "[Terraform] Example API"
  description     = <<-EOT
    A example API that routes traffic to gravitee echo API with an extra header.
    It uses basic authentication with johndoe/unknown as credentials.
    It is published to the API portal as public API and deployed to the Gateway.
    Some analytics are configured and documentation page is configured.
  EOT
  version         = "1.0"
  type            = "PROXY"
  state           = "STARTED"
  visibility      = "PUBLIC"
  lifecycle_state = "PUBLISHED"
  labels = [
    "example",
    "proxy",
    "terraform"
  ]
  listeners = [
    {
      http = {
        type = "HTTP"
        entrypoints = [
          {
            type = "http-proxy"
          }
        ]
        paths = [
          {
            path = "/example/"
          }
        ]
      }
    }
  ]
  endpoint_groups = [
    {
      name = "Default HTTP proxy group"
      type = "http-proxy"
      load_balancer = {
        type = "ROUND_ROBIN"
      }
      endpoints = [
        {
          name                  = "Default HTTP proxy"
          type                  = "http-proxy"
          weight                = 1
          inherit_configuration = false
          # Configuration is JSON as is depends on the type schema
          configuration = jsonencode({
            target = "https://api.gravitee.io/echo"
          })
        }
      ]
    }
  ]
  properties = [
    {
      key   = "hello",
      value = "World!",
    }
  ]
  flow_execution = {
    mode           = "DEFAULT"
    match_required = false
  }
  flows = [
    {
      enabled = true
      selectors = [
        {
          http = {
            type         = "HTTP"
            path         = "/"
            pathOperator = "STARTS_WITH"
            methods      = []
          }
        }
      ]
      request = [
        {
          enabled = true
          name    = "Add 1 header"
          policy  = "transform-headers"
          # Configuration is JSON as the schema depends on the policy used
          configuration = jsonencode({
            scope = "REQUEST"
            addHeaders = [
              {
                name  = "X-Hello"
                value = "{#api.properties['hello']}"
              }
            ]
          })
        }
      ]
    }
  ]
  resources = [
    {
      enabled = true
      name    = "In memory users"
      type    = "auth-provider-inline-resource"
      configuration = jsonencode({
        users = [
          {
            username = "johndoe"
            password = "unknown"
            roles    = []
          }
        ]
      })
    }
  ]
  plans = [
    {
      hrid        = "keyless"
      name        = "No security"
      type        = "API"
      mode        = "STANDARD"
      validation  = "AUTO"
      status      = "PUBLISHED"
      description = "This plan does not require any authentication"
      security = {
        type = "KEY_LESS"
      }
      flows = [
        {
          enabled = true
          selectors = [
            {
              http = {
                type         = "HTTP"
                path         = "/"
                pathOperator = "STARTS_WITH"
                methods      = []
              }
            }
          ]
          request = [
            {
              # Authentication policy
              "name" : "Basic Authentication",
              "enabled" : true,
              "policy" : "policy-basic-authentication",
              "configuration" : jsonencode({
                "authenticationProviders" = [
                  "In memory users"
                ]
                "realm" = "gravitee.io"
              })
            }
          ]
        }

      ]
    }
  ]
  analytics = {
    enabled = true
    logging = {
      condition = "{#request.headers['Accept'][0] == '*/*'}"
      content = {
        headers         = true
        messageHeaders  = false
        payload         = true
        messagePayload  = false
        messageMetadata = false
      }
      phase = {
        request  = true
        response = true
      }
      mode = {
        endpoint   = true
        entrypoint = true
      }
    }
    tracing = {
      enabled = true
      verbose = true
    }
  }
  pages = [
    {
      hrid     = "homepage"
      name     = "Home"
      content  = <<-EOT
          # Homepage
          Terraform example API document home page.
          From now on only your imagination is the limit.
          EOT
      homepage = true
      type     = "MARKDOWN"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `endpoint_groups` (Attributes List) Common endpoints properties and container of endpoints specifying backends this API can call. (see [below for nested schema](#nestedatt--endpoint_groups))
- `hrid` (String) A unique human readable id identifying this resource. Requires replacement if changed.
- `lifecycle_state` (String) The status of the API regarding the console. must be one of ["ARCHIVED", "CREATED", "DEPRECATED", "PUBLISHED", "UNPUBLISHED"]
- `listeners` (Attributes List) The list of listeners defining how this API can be called. They depend on the API type. (see [below for nested schema](#nestedatt--listeners))
- `name` (String) API's name. Duplicate names can exists.
- `type` (String) API's type. must be one of ["MESSAGE", "PROXY", "NATIVE"]
- `version` (String) API's version. It's a simple string only used to help manage API versioning.

### Optional

- `analytics` (Attributes) API analytics configuration to enable/disable what can be observed. (see [below for nested schema](#nestedatt--analytics))
- `categories` (List of String) The list of category names (or UUID) associated with this API. Default: []
- `description` (String) Basic API documentation to describe what this API does.
- `environment_id` (String) environment ID
- `failover` (Attributes) Defines the failover behavior to bypass endpoints when some are slow. (see [below for nested schema](#nestedatt--failover))
- `flow_execution` (Attributes) Flow execution enablement (Not applicable for Native API) (see [below for nested schema](#nestedatt--flow_execution))
- `flows` (Attributes List) Common flows for the API where traffic policies are configured. (see [below for nested schema](#nestedatt--flows))
- `groups` (List of String) Name or UUIDs of existing groups (of users) associated with this API. Default: []
- `labels` (List of String) Informative labels for this API. Default: []
- `members` (Attributes List) Users that can access or manage the API (depending on their roles). (see [below for nested schema](#nestedatt--members))
- `metadata` (Attributes List) The list of API's metadata. (see [below for nested schema](#nestedatt--metadata))
- `notify_members` (Boolean) If true, new members added to the API spec will
be notified when the API is synced with APIM.
Default: true
- `organization_id` (String) organization ID
- `pages` (Attributes List) Pages for the API. Elements positioned earlier in the list are displayed first, with subsequent elements appearing below. (see [below for nested schema](#nestedatt--pages))
- `plans` (Attributes List) Available plans for the API to define API security. You must provide a plan if `state` is `STARTED`. Plans are prioritized by their position in the list, with earlier entries having higher priority. (see [below for nested schema](#nestedatt--plans))
- `primary_owner` (Attributes) User owner of this. Can perform all possible actions on it. (see [below for nested schema](#nestedatt--primary_owner))
- `properties` (Attributes List) Properties usable using EL. (see [below for nested schema](#nestedatt--properties))
- `resources` (Attributes List) Data resources usable in policy to access (mostly) external data (authentication, cache, registries...). (see [below for nested schema](#nestedatt--resources))
- `response_templates` (Map of Map of Object) Map of content-type dependent Response Templates for the API (Not applicable for Native
API) to customize Gateway responses body on predefined errors.

Key of the map is the error code.
- `services` (Attributes) Api services (dynamic properties) (see [below for nested schema](#nestedatt--services))
- `state` (String) STARTED will make this API callable on tis context path, STOPPED will yield 404 error. must be one of ["CLOSED", "INITIALIZED", "STARTED", "STOPPED", "STOPPING"]
- `tags` (List of String) Sharding tags that restrict deployment to Gateways having those tags on. No tags means "always deploy". Default: []
- `visibility` (String) The visibility of the entity regarding the portal. Default: "PUBLIC"; must be one of ["PUBLIC", "PRIVATE"]

### Read-Only

- `id` (String) API's uuid.

<a id="nestedatt--endpoint_groups"></a>
### Nested Schema for `endpoint_groups`

Optional:

- `endpoints` (Attributes List) All endpoints of this API. (see [below for nested schema](#nestedatt--endpoint_groups--endpoints))
- `load_balancer` (Attributes) Load Balancer to distribute traffic between endpoints. (see [below for nested schema](#nestedatt--endpoint_groups--load_balancer))
- `name` (String) The name of the endpoint group
- `services` (Attributes) API Endpoint Group Services (see [below for nested schema](#nestedatt--endpoint_groups--services))
- `shared_configuration` (String) JSON configuration for the `type` of `endpoints` that will be shared across all endpoints. Parsed as JSON.
- `type` (String) The type of the endpoint group. Not Null

<a id="nestedatt--endpoint_groups--endpoints"></a>
### Nested Schema for `endpoint_groups.endpoints`

Optional:

- `configuration` (String) JSON Configuration specific to this endpoint that cannot be define at the group level. Parsed as JSON.
- `inherit_configuration` (Boolean) Enables shared configuration inheritance. Default: false
- `name` (String) The name of the endpoint
- `secondary` (Boolean) Define this endpoint as fallback endpoint in case other endpoints are no longer responding. Default: false
- `services` (Attributes) API Endpoint Services (see [below for nested schema](#nestedatt--endpoint_groups--endpoints--services))
- `shared_configuration_override` (String) JSON Configuration that replaces the shared configuration defined at the group level. Parsed as JSON.
- `tenants` (List of String) The list of Getaway's tenants on which the endpoint can be used.
- `type` (String) The type of endpoint. Not Null
- `weight` (Number) The weight of the endpoint for the load balancer algorythm. Default: 1

<a id="nestedatt--endpoint_groups--endpoints--services"></a>
### Nested Schema for `endpoint_groups.endpoints.services`

Optional:

- `health_check` (Attributes) Specifies an API property fetch using an external source. (see [below for nested schema](#nestedatt--endpoint_groups--endpoints--services--health_check))

<a id="nestedatt--endpoint_groups--endpoints--services--health_check"></a>
### Nested Schema for `endpoint_groups.endpoints.services.health_check`

Optional:

- `configuration` (String) JSON configuration of the service. Not Null; Parsed as JSON.
- `enabled` (Boolean) Is the service enabled or not. Default: true
- `override_configuration` (Boolean) When the configuration overrides an inherited configuration. Default: false
- `type` (String) The service plugin ID used. Not Null




<a id="nestedatt--endpoint_groups--load_balancer"></a>
### Nested Schema for `endpoint_groups.load_balancer`

Optional:

- `type` (String) Load balancer type. Default: "ROUND_ROBIN"; must be one of ["RANDOM", "ROUND_ROBIN", "WEIGHTED_RANDOM", "WEIGHTED_ROUND_ROBIN"]


<a id="nestedatt--endpoint_groups--services"></a>
### Nested Schema for `endpoint_groups.services`

Optional:

- `discovery` (Attributes) Specifies an API property fetch using an external source. (see [below for nested schema](#nestedatt--endpoint_groups--services--discovery))
- `health_check` (Attributes) Specifies an API property fetch using an external source. (see [below for nested schema](#nestedatt--endpoint_groups--services--health_check))

<a id="nestedatt--endpoint_groups--services--discovery"></a>
### Nested Schema for `endpoint_groups.services.discovery`

Optional:

- `configuration` (String) JSON configuration of the service. Not Null; Parsed as JSON.
- `enabled` (Boolean) Is the service enabled or not. Default: true
- `override_configuration` (Boolean) When the configuration overrides an inherited configuration. Default: false
- `type` (String) The service plugin ID used. Not Null


<a id="nestedatt--endpoint_groups--services--health_check"></a>
### Nested Schema for `endpoint_groups.services.health_check`

Optional:

- `configuration` (String) JSON configuration of the service. Not Null; Parsed as JSON.
- `enabled` (Boolean) Is the service enabled or not. Default: true
- `override_configuration` (Boolean) When the configuration overrides an inherited configuration. Default: false
- `type` (String) The service plugin ID used. Not Null




<a id="nestedatt--listeners"></a>
### Nested Schema for `listeners`

Optional:

- `http` (Attributes) HTTP Listener (see [below for nested schema](#nestedatt--listeners--http))
- `kafka` (Attributes) Kafka listener (see [below for nested schema](#nestedatt--listeners--kafka))
- `subscription` (Attributes) Subscription listener for message API. (see [below for nested schema](#nestedatt--listeners--subscription))
- `tcp` (Attributes) TCP listener (see [below for nested schema](#nestedatt--listeners--tcp))

<a id="nestedatt--listeners--http"></a>
### Nested Schema for `listeners.http`

Optional:

- `cors` (Attributes) Http listener Cross-Origin Resource Sharing (see [below for nested schema](#nestedatt--listeners--http--cors))
- `entrypoints` (Attributes List) A list of possible entrypoint of the same type. (see [below for nested schema](#nestedatt--listeners--http--entrypoints))
- `paths` (Attributes List) One of the possible context paths of this API (see [below for nested schema](#nestedatt--listeners--http--paths))
- `servers` (List of String) Restrict the API to a given "server id", when the gateway runs in multiple servers mode (several ports per protocol).
- `type` (String) Listener type. Not Null; must be one of ["HTTP", "SUBSCRIPTION", "TCP", "KAFKA"]

<a id="nestedatt--listeners--http--cors"></a>
### Nested Schema for `listeners.http.cors`

Optional:

- `allow_credentials` (Boolean) `Access-Control-Allow-Credentials`: Indicates whether or not the response to the request can be exposed when the credentials flag is true.
- `allow_headers` (List of String) `Access-Control-Allow-Headers`: Used in response to a preflight request to indicate which HTTP headers can be used when making the actual request.
- `allow_methods` (List of String) `Access-Control-Allow-Methods`: Specifies the method or methods allowed when accessing the resource. This is used in response to a preflight request. HTTP methods that are allow to access the resource.
- `allow_origin` (List of String) `Access-Control-Allow-Origin`: The origin parameter specifies a URI that may access the resource. Scheme, domain and port are part of the same-origin definition.
If you choose to enable '*' it means that is allows all requests, regardless of origin. URIs RegExp patterns that may access the resource
- `enabled` (Boolean) Enable CORS
- `expose_headers` (List of String) `Access-Control-Expose-Headers`: This header lets a server whitelist headers that browsers are allowed to access.
- `max_age` (Number) How long (in seconds) the results of a preflight request can be cached (-1 if disabled). Default: -1
- `run_policies` (Boolean) Allow the Gateway to run policies during in pre-flight request


<a id="nestedatt--listeners--http--entrypoints"></a>
### Nested Schema for `listeners.http.entrypoints`

Optional:

- `configuration` (String) JSON configuration for the selected `type`. Parsed as JSON.
- `dlq` (Attributes) Dead Letter Queue to process undelivered messages. (see [below for nested schema](#nestedatt--listeners--http--entrypoints--dlq))
- `qos` (String) Type of the quality of service (for message APIs). Default: "AUTO"; must be one of ["NONE", "AUTO", "AT_MOST_ONCE", "AT_LEAST_ONCE"]
- `type` (String) The type of the entrypoint. Not Null

<a id="nestedatt--listeners--http--entrypoints--dlq"></a>
### Nested Schema for `listeners.http.entrypoints.dlq`

Optional:

- `endpoint` (String) The endpoint of the DLQ.



<a id="nestedatt--listeners--http--paths"></a>
### Nested Schema for `listeners.http.paths`

Optional:

- `host` (String) Virtual host required to access this API. (`Host` or `:Authority` headers, remote address for websockets)
- `override_access` (Boolean) Override default organization entrypoint with `host`. Default: false
- `path` (String) Default: "/"



<a id="nestedatt--listeners--kafka"></a>
### Nested Schema for `listeners.kafka`

Optional:

- `entrypoints` (Attributes List) A list of possible entrypoint of the same type. (see [below for nested schema](#nestedatt--listeners--kafka--entrypoints))
- `host` (String) A hostname for which the API will match against SNI. Not Null
- `servers` (List of String) Restrict the API to a given "server id", when the gateway runs in multiple servers mode (several ports per protocol).
- `type` (String) Listener type. Not Null; must be one of ["HTTP", "SUBSCRIPTION", "TCP", "KAFKA"]

<a id="nestedatt--listeners--kafka--entrypoints"></a>
### Nested Schema for `listeners.kafka.entrypoints`

Optional:

- `configuration` (String) JSON configuration for the selected `type`. Parsed as JSON.
- `dlq` (Attributes) Dead Letter Queue to process undelivered messages. (see [below for nested schema](#nestedatt--listeners--kafka--entrypoints--dlq))
- `qos` (String) Type of the quality of service (for message APIs). Default: "AUTO"; must be one of ["NONE", "AUTO", "AT_MOST_ONCE", "AT_LEAST_ONCE"]
- `type` (String) The type of the entrypoint. Not Null

<a id="nestedatt--listeners--kafka--entrypoints--dlq"></a>
### Nested Schema for `listeners.kafka.entrypoints.dlq`

Optional:

- `endpoint` (String) The endpoint of the DLQ.




<a id="nestedatt--listeners--subscription"></a>
### Nested Schema for `listeners.subscription`

Optional:

- `entrypoints` (Attributes List) A list of possible entrypoint of the same type. (see [below for nested schema](#nestedatt--listeners--subscription--entrypoints))
- `servers` (List of String) Restrict the API to a given "server id", when the gateway runs in multiple servers mode (several ports per protocol).
- `type` (String) Listener type. Not Null; must be one of ["HTTP", "SUBSCRIPTION", "TCP", "KAFKA"]

<a id="nestedatt--listeners--subscription--entrypoints"></a>
### Nested Schema for `listeners.subscription.entrypoints`

Optional:

- `configuration` (String) JSON configuration for the selected `type`. Parsed as JSON.
- `dlq` (Attributes) Dead Letter Queue to process undelivered messages. (see [below for nested schema](#nestedatt--listeners--subscription--entrypoints--dlq))
- `qos` (String) Type of the quality of service (for message APIs). Default: "AUTO"; must be one of ["NONE", "AUTO", "AT_MOST_ONCE", "AT_LEAST_ONCE"]
- `type` (String) The type of the entrypoint. Not Null

<a id="nestedatt--listeners--subscription--entrypoints--dlq"></a>
### Nested Schema for `listeners.subscription.entrypoints.dlq`

Optional:

- `endpoint` (String) The endpoint of the DLQ.




<a id="nestedatt--listeners--tcp"></a>
### Nested Schema for `listeners.tcp`

Optional:

- `entrypoints` (Attributes List) A list of possible entrypoint of the same type. (see [below for nested schema](#nestedatt--listeners--tcp--entrypoints))
- `hosts` (List of String) A list of hostnames for which the API will match against SNI.  This must be unique for all TCP listener for a given server id. See 'servers' attribute. Not Null
- `servers` (List of String) Restrict the API to a given "server id", when the gateway runs in multiple servers mode (several ports per protocol).
- `type` (String) Listener type. Not Null; must be one of ["HTTP", "SUBSCRIPTION", "TCP", "KAFKA"]

<a id="nestedatt--listeners--tcp--entrypoints"></a>
### Nested Schema for `listeners.tcp.entrypoints`

Optional:

- `configuration` (String) JSON configuration for the selected `type`. Parsed as JSON.
- `dlq` (Attributes) Dead Letter Queue to process undelivered messages. (see [below for nested schema](#nestedatt--listeners--tcp--entrypoints--dlq))
- `qos` (String) Type of the quality of service (for message APIs). Default: "AUTO"; must be one of ["NONE", "AUTO", "AT_MOST_ONCE", "AT_LEAST_ONCE"]
- `type` (String) The type of the entrypoint. Not Null

<a id="nestedatt--listeners--tcp--entrypoints--dlq"></a>
### Nested Schema for `listeners.tcp.entrypoints.dlq`

Optional:

- `endpoint` (String) The endpoint of the DLQ.





<a id="nestedatt--analytics"></a>
### Nested Schema for `analytics`

Optional:

- `enabled` (Boolean) Whether or not analytics are enabled. Default: true
- `logging` (Attributes) API logging configuration (Not for native APIs) (see [below for nested schema](#nestedatt--analytics--logging))
- `sampling` (Attributes) API analytics sampling (message API only). This is meant to log only a portion to avoid overflowing the log sink. (see [below for nested schema](#nestedatt--analytics--sampling))
- `tracing` (Attributes) OpenTelemetry tracing (Not for native APIs) (see [below for nested schema](#nestedatt--analytics--tracing))

<a id="nestedatt--analytics--logging"></a>
### Nested Schema for `analytics.logging`

Optional:

- `condition` (String) Filter using EL what request should be logged
- `content` (Attributes) API logging content when one of logging mode is enabled (Not for native APIs) (see [below for nested schema](#nestedatt--analytics--logging--content))
- `message_condition` (String) Filter using EL what message should be logged
- `mode` (Attributes) API logging mode (Not for native APIs) (see [below for nested schema](#nestedatt--analytics--logging--mode))
- `phase` (Attributes) Logging phase when one of logging mode is enabled (Not for native APIs) (see [below for nested schema](#nestedatt--analytics--logging--phase))

<a id="nestedatt--analytics--logging--content"></a>
### Nested Schema for `analytics.logging.content`

Optional:

- `headers` (Boolean) Enable to log request headers
- `message_headers` (Boolean) Enable to log message headers (Message APIs only)
- `message_metadata` (Boolean) Enable to log message metadata (Message APIs only)
- `message_payload` (Boolean) Enable to log message headers (Message APIs only)
- `payload` (Boolean) Enable to log request headers (Proxy APIs only)


<a id="nestedatt--analytics--logging--mode"></a>
### Nested Schema for `analytics.logging.mode`

Optional:

- `endpoint` (Boolean) Enables endpoint logging
- `entrypoint` (Boolean) Enables entrypoint logging


<a id="nestedatt--analytics--logging--phase"></a>
### Nested Schema for `analytics.logging.phase`

Optional:

- `request` (Boolean) Enables logging durring request phase
- `response` (Boolean) Enables logging durring response phase



<a id="nestedatt--analytics--sampling"></a>
### Nested Schema for `analytics.sampling`

Optional:

- `type` (String) The type of the sampling:

`PROBABILITY`: based on a specified probability,
`TEMPORAL`: all messages for on time duration,
`COUNT`: for every number of specified messages
Not Null; must be one of ["PROBABILITY", "TEMPORAL", "COUNT"]
- `value` (String) The value of the sampling:

`PROBABILITY`: between `0.01` and `0.5`,
`TEMPORAL`: ISO-8601 duration format, 1 second minimum (PT1S)
`COUNT`: greater than `1`,


<a id="nestedatt--analytics--tracing"></a>
### Nested Schema for `analytics.tracing`

Optional:

- `enabled` (Boolean) Enable OpenTelemetry tracing
- `verbose` (Boolean) Enable technical tracing to get more details on request execution. Be careful this settings can generate more noise and can impact performance.



<a id="nestedatt--failover"></a>
### Nested Schema for `failover`

Optional:

- `enabled` (Boolean) Automatically redirects request to the next endpoint if the response is too slow. Default: false
- `max_failures` (Number) The maximum number of failures allowed before the circuit breaker can calculate the error rate. Default: 5
- `max_retries` (Number) Limit the number of retry attempts before recording an error. Each attempt dynamically selects an endpoint based on the load balancing algorithm. Default: 2
- `open_state_duration` (Number) The duration in milliseconds to indicate how long the circuit breaker should stay open, before it switches to half open. Default: 10000
- `per_subscription` (Boolean) If true, a circuit breaker breaker will be dedicated for each subscriber, else, one and only circuit breaker will be used for the API. Default: true
- `slow_call_duration` (Number) Define a threshold for slow responses. Requests exceeding this duration are recorded as slow. Default: 2000


<a id="nestedatt--flow_execution"></a>
### Nested Schema for `flow_execution`

Optional:

- `match_required` (Boolean) To indicate failure if no flow matches the request. Default: false
- `mode` (String) DEFAULT : all flows that match the conditions are executed in the order they are defined BEST_MATCH: only the best matching flow will be executed. Default: "DEFAULT"; must be one of ["BEST_MATCH", "DEFAULT"]


<a id="nestedatt--flows"></a>
### Nested Schema for `flows`

Optional:

- `connect` (Attributes List) Connect flow steps used for NATIVE APIs (see [below for nested schema](#nestedatt--flows--connect))
- `enabled` (Boolean) Is the flow enabled. Default: true
- `interact` (Attributes List) Interact flow steps used for NATIVE APIs (see [below for nested schema](#nestedatt--flows--interact))
- `name` (String) Flow's name.
- `publish` (Attributes List) Publish flow steps used for MESSAGE and NATIVE APIs (see [below for nested schema](#nestedatt--flows--publish))
- `request` (Attributes List) Request flow steps used for PROXY and MESSAGE APIs (see [below for nested schema](#nestedatt--flows--request))
- `response` (Attributes List) Response flow steps used for PROXY and MESSAGE APIs (see [below for nested schema](#nestedatt--flows--response))
- `selectors` (Attributes List) (see [below for nested schema](#nestedatt--flows--selectors))
- `subscribe` (Attributes List) Subscribe flow steps used for MESSAGE and NATIVE APIs (see [below for nested schema](#nestedatt--flows--subscribe))
- `tags` (List of String) Flow's informative tags.

<a id="nestedatt--flows--connect"></a>
### Nested Schema for `flows.connect`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--flows--interact"></a>
### Nested Schema for `flows.interact`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--flows--publish"></a>
### Nested Schema for `flows.publish`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--flows--request"></a>
### Nested Schema for `flows.request`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--flows--response"></a>
### Nested Schema for `flows.response`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--flows--selectors"></a>
### Nested Schema for `flows.selectors`

Optional:

- `channel` (Attributes) Channel selector (see [below for nested schema](#nestedatt--flows--selectors--channel))
- `condition` (Attributes) Condition selector (see [below for nested schema](#nestedatt--flows--selectors--condition))
- `http` (Attributes) HTTP selector (see [below for nested schema](#nestedatt--flows--selectors--http))

<a id="nestedatt--flows--selectors--channel"></a>
### Nested Schema for `flows.selectors.channel`

Optional:

- `channel` (String) The channel of the selector. Default: "/"
- `channel_operator` (String) Operator function to match a URI path. Default: "STARTS_WITH"; must be one of ["EQUALS", "STARTS_WITH"]
- `entrypoints` (List of String) Among all entrypoints types, restrict which one will trigger this flow. Unset or empty means "all types".
- `operations` (List of String) The list of operations associated with this channel selector.
- `type` (String) Selector type. Not Null; must be one of ["HTTP", "CHANNEL", "CONDITION"]


<a id="nestedatt--flows--selectors--condition"></a>
### Nested Schema for `flows.selectors.condition`

Optional:

- `condition` (String) The EL condition of the selector. Not Null
- `type` (String) Selector type. Not Null; must be one of ["HTTP", "CHANNEL", "CONDITION"]


<a id="nestedatt--flows--selectors--http"></a>
### Nested Schema for `flows.selectors.http`

Optional:

- `methods` (List of String) Methods to match, unset or empty means "any"
- `path` (String) The path to match. Default: "/"
- `path_operator` (String) Operator function to match a URI path. Default: "STARTS_WITH"; must be one of ["EQUALS", "STARTS_WITH"]
- `type` (String) Selector type. Not Null; must be one of ["HTTP", "CHANNEL", "CONDITION"]



<a id="nestedatt--flows--subscribe"></a>
### Nested Schema for `flows.subscribe`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null



<a id="nestedatt--members"></a>
### Nested Schema for `members`

Optional:

- `role` (String) The role of the user in regards of the managed oject (API, Application, etc.). Not Null
- `source` (String) Where the memeber was created (system, idp, etc.). Not Null
- `source_id` (String) Id of the user in the source. Not Null


<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Optional:

- `default_value` (String) The default value of the metadata if the value is not set.
- `format` (String) The format of the metadata. Not Null; must be one of ["STRING", "NUMERIC", "BOOLEAN", "DATE", "MAIL", "URL"]
- `hidden` (Boolean) if this metadata should be hidden. Default: false
- `key` (String) The key of the metadata if different from sanitized name (lowercase + hyphens).
- `name` (String) The name of the metadata. Not Null
- `value` (String) The value of the metadata.


<a id="nestedatt--pages"></a>
### Nested Schema for `pages`

Optional:

- `configuration` (Map of String) Key/value page configuration (Configure swagger UI or or use Redoc instead)
- `content` (String) The content of the page, if any.
- `homepage` (Boolean) If true, this page will be displayed as the homepage of your API documentation. Default: false
- `hrid` (String) A unique human readable id identifying this resource. Not Null
- `name` (String) This is the display name of the page in APIM and on the portal.
This field can be edited safely if you want to rename a page.
Not Null
- `parent_hrid` (String) If your page contains a folder, setting this field to the folder's hrid will be reflected 
into APIM by making the page a child of this folder.
- `published` (Boolean) If true, the page will be accessible from the portal (default is false). Default: false
- `source` (Attributes) Allow you to fetch pages from various external sources, 
overriding page content each time the source is fetched. (see [below for nested schema](#nestedatt--pages--source))
- `type` (String) The type of the documentation page or folder. Not Null; must be one of ["ASCIIDOC", "ASYNCAPI", "MARKDOWN", "MARKDOWN_TEMPLATE", "SWAGGER", "FOLDER", "LINK", "ROOT", "SYSTEM_FOLDER", "TRANSLATION"]
- `visibility` (String) The visibility of the entity regarding the portal. Default: "PUBLIC"; must be one of ["PUBLIC", "PRIVATE"]

Read-Only:

- `cross_id` (String) Page's cross uuid.

<a id="nestedatt--pages--source"></a>
### Nested Schema for `pages.source`

Optional:

- `configuration` (String) JSON object configuration of the fetch plugin. Parsed as JSON.
- `type` (String) The type of the page source (fetcher plugin ID).



<a id="nestedatt--plans"></a>
### Nested Schema for `plans`

Optional:

- `characteristics` (List of String) Plan informative characteristics
- `description` (String) A description for this plan.
- `excluded_groups` (List of String) Access-control, UUID of groups excluded from this plan
- `flows` (Attributes List) Flows like API flows, composed of step running policies. 
All steps are executed before the next plan flow or before the API flows,
same on the reponse, which means API reponse flows will always run last. (see [below for nested schema](#nestedatt--plans--flows))
- `general_conditions_hrid` (String) API page `hrid` that serves as general conditions documentation of this plan
- `hrid` (String) A unique human readable id identifying this resource. Not Null
- `mode` (String) The behavioural mode of the Plan (Standard for classical plan, Push for subscription plan). Not Null; must be one of ["STANDARD", "PUSH"]
- `name` (String) Name of the plan. Not Null
- `security` (Attributes) API plan security. Not Null (see [below for nested schema](#nestedatt--plans--security))
- `selection_rule` (String) An EL expression that must return a boolean to enable the flow based on the request.
- `status` (String) Plan status, only `PUBLISHED` makes the plan available at runtime. Not Null; must be one of ["STAGING", "PUBLISHED", "DEPRECATED", "CLOSED"]
- `tags` (List of String) Sharding tags that restrict deployment to Gateways having those tags on. No tags means "always deploy". This tags list must be a subset of the API's tags list. Default: []
- `type` (String) Only one possible type: API. Default: "API"; must be one of ["API", "CATALOG"]
- `validation` (String) Specifies if subscriptions must be manually validated by a human actor.
For automation API, it is default to `AUTO`.
Default: "AUTO"; must be one of ["AUTO", "MANUAL"]

<a id="nestedatt--plans--flows"></a>
### Nested Schema for `plans.flows`

Optional:

- `connect` (Attributes List) Connect flow steps used for NATIVE APIs (see [below for nested schema](#nestedatt--plans--flows--connect))
- `enabled` (Boolean) Is the flow enabled. Default: true
- `interact` (Attributes List) Interact flow steps used for NATIVE APIs (see [below for nested schema](#nestedatt--plans--flows--interact))
- `name` (String) Flow's name.
- `publish` (Attributes List) Publish flow steps used for MESSAGE and NATIVE APIs (see [below for nested schema](#nestedatt--plans--flows--publish))
- `request` (Attributes List) Request flow steps used for PROXY and MESSAGE APIs (see [below for nested schema](#nestedatt--plans--flows--request))
- `response` (Attributes List) Response flow steps used for PROXY and MESSAGE APIs (see [below for nested schema](#nestedatt--plans--flows--response))
- `selectors` (Attributes List) (see [below for nested schema](#nestedatt--plans--flows--selectors))
- `subscribe` (Attributes List) Subscribe flow steps used for MESSAGE and NATIVE APIs (see [below for nested schema](#nestedatt--plans--flows--subscribe))
- `tags` (List of String) Flow's informative tags.

<a id="nestedatt--plans--flows--connect"></a>
### Nested Schema for `plans.flows.connect`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--plans--flows--interact"></a>
### Nested Schema for `plans.flows.interact`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--plans--flows--publish"></a>
### Nested Schema for `plans.flows.publish`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--plans--flows--request"></a>
### Nested Schema for `plans.flows.request`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--plans--flows--response"></a>
### Nested Schema for `plans.flows.response`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null


<a id="nestedatt--plans--flows--selectors"></a>
### Nested Schema for `plans.flows.selectors`

Optional:

- `channel` (Attributes) Channel selector (see [below for nested schema](#nestedatt--plans--flows--selectors--channel))
- `condition` (Attributes) Condition selector (see [below for nested schema](#nestedatt--plans--flows--selectors--condition))
- `http` (Attributes) HTTP selector (see [below for nested schema](#nestedatt--plans--flows--selectors--http))

<a id="nestedatt--plans--flows--selectors--channel"></a>
### Nested Schema for `plans.flows.selectors.channel`

Optional:

- `channel` (String) The channel of the selector. Default: "/"
- `channel_operator` (String) Operator function to match a URI path. Default: "STARTS_WITH"; must be one of ["EQUALS", "STARTS_WITH"]
- `entrypoints` (List of String) Among all entrypoints types, restrict which one will trigger this flow. Unset or empty means "all types".
- `operations` (List of String) The list of operations associated with this channel selector.
- `type` (String) Selector type. Not Null; must be one of ["HTTP", "CHANNEL", "CONDITION"]


<a id="nestedatt--plans--flows--selectors--condition"></a>
### Nested Schema for `plans.flows.selectors.condition`

Optional:

- `condition` (String) The EL condition of the selector. Not Null
- `type` (String) Selector type. Not Null; must be one of ["HTTP", "CHANNEL", "CONDITION"]


<a id="nestedatt--plans--flows--selectors--http"></a>
### Nested Schema for `plans.flows.selectors.http`

Optional:

- `methods` (List of String) Methods to match, unset or empty means "any"
- `path` (String) The path to match. Default: "/"
- `path_operator` (String) Operator function to match a URI path. Default: "STARTS_WITH"; must be one of ["EQUALS", "STARTS_WITH"]
- `type` (String) Selector type. Not Null; must be one of ["HTTP", "CHANNEL", "CONDITION"]



<a id="nestedatt--plans--flows--subscribe"></a>
### Nested Schema for `plans.flows.subscribe`

Optional:

- `condition` (String) The EL condition return a boolean to execute this step at runtime. Empty expression implies it is enabled.
- `configuration` (String) JSON Object configuration of the policy used. Parsed as JSON.
- `description` (String) A description for the step
- `enabled` (Boolean) To enable the step globally. Default: true
- `message_condition` (String) The message condition of the step (for message API)
- `name` (String) The name of the step
- `policy` (String) The policy of the step (plugin ID). Not Null



<a id="nestedatt--plans--security"></a>
### Nested Schema for `plans.security`

Optional:

- `configuration` (String) JSON Object to configure specific attributes of a Plan. Parsed as JSON.
- `type` (String) API Plan security implementation. Not Null; must be one of ["KEY_LESS", "OAUTH2", "JWT", "MTLS"]



<a id="nestedatt--primary_owner"></a>
### Nested Schema for `primary_owner`

Optional:

- `display_name` (String) Owner's name.
- `email` (String) Owner's email. Can be null if owner is a group.
- `id` (String) Owner's uuid.
- `type` (String) The type of membership. must be one of ["USER", "GROUP"]


<a id="nestedatt--properties"></a>
### Nested Schema for `properties`

Optional:

- `dynamic` (Boolean) When the value was populated from dynamic property service.
- `encryptable` (Boolean) When the input value needs to be encrypted.
- `key` (String) Property key. Not Null
- `value` (String) Property value. Not Null

Read-Only:

- `encrypted` (Boolean) When the value has been encrypted in database.


<a id="nestedatt--resources"></a>
### Nested Schema for `resources`

Optional:

- `configuration` (String) JSON Object configuration specific to this resource. Not Null; Parsed as JSON.
- `enabled` (Boolean) Make it available or not. Default: true
- `name` (String) API resource name. Not Null
- `type` (String) Resource type (resource plugin ID). Not Null


<a id="nestedatt--services"></a>
### Nested Schema for `services`

Optional:

- `dynamic_property` (Attributes) Specifies an API property fetch using an external source. (see [below for nested schema](#nestedatt--services--dynamic_property))

<a id="nestedatt--services--dynamic_property"></a>
### Nested Schema for `services.dynamic_property`

Optional:

- `configuration` (String) JSON configuration of the service. Not Null; Parsed as JSON.
- `enabled` (Boolean) Is the service enabled or not. Default: true
- `override_configuration` (Boolean) When the configuration overrides an inherited configuration. Default: false
- `type` (String) The service plugin ID used. Not Null

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = apim_apiv4.example
  id = <<-EOT
    {
      "organization_id": "DEFAULT",
      "environment_id": "DEFAULT",
      "hrid": "example"
    }
  EOT
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import apim_apiv4.example '{"organization_id":"DEFAULT", "environment_id":"DEFAULT", "hrid":"example"}'
```
